import{z as J,d as h,c as _,b as r,a as o,e as F,y as K,p as R,J as $,t as B,B as z,i as O,r as v,o as H,l as S,C as q,w as A,K as G,s as P,f as Q,h as W,T as X,u as Y,L as Z,E as ee,M as te}from"./index-BlT1HkFY.js";import{s as ae}from"./index-CnY9MNOL.js";import{s as le}from"./index-CHrWD7jW.js";const se={class:"overflow-auto"},oe={class:"flex flex-row md:flex-col gap-1 md:gap-2 list-none m-0 p-0 overflow-auto"},ie=["onClick"],ne={key:0,class:"ml-auto text-sm font-semibold bg-primary-50 text-primary-900 px-2 py-1 hidden md:inline text-center",style:{"border-radius":"2rem",width:"23px",height:"23px"}},re={__name:"MailSidebar",props:{items:{type:Array,default:()=>[]}},setup(k){const p=J();function a(s){const m=s.routerLink||"/apps/mail/compose";p.push(m)}return(s,m)=>{const u=O;return h(),_("div",null,[r(u,{onClick:a,label:"Compose New",class:"mb-8 w-full",outlined:""}),o("div",se,[o("ul",oe,[(h(!0),_(F,null,K(k.items,l=>(h(),_("li",{key:l.id,class:R(["cursor-pointer select-none p-4 duration-150 rounded flex items-center justify-center md:justify-start md:flex-1 flex-auto",{"bg-primary":$(p).currentRoute.value.path===l.routerLink,"hover:surface-hover":$(p).currentRoute.value.path!==l.routerLink}]),onClick:b=>a(l)},[o("i",{class:R(["md:mr-4 text-surface-600 dark:text-surface-200 duration-150 text-lg",[l.icon,{"text-primary-50":$(p).currentRoute.value.path===l.routerLink}]])},null,2),o("span",{class:R(["text-surface-900 dark:text-surface-0 font-medium hidden md:inline",{"text-primary-50":$(p).currentRoute.value.path===l.routerLink}])},B(l.label),3),l.badge?(h(),_("span",ne,B(l.badge),1)):z("",!0)],10,ie))),128))])])])}}},ue={class:"p-0 m-0"},ce={class:"bg-surface-0 dark:bg-surface-950 grid grid-cols-12 grid-nogutter flex-col md:flex-row gap-12 p-8 rounded"},de={class:"col"},pe=o("label",{for:"to",class:"block text-surface-900 dark:text-surface-0 font-semibold mb-4"},"To",-1),me={class:"col"},fe=o("label",{for:"Subject",class:"block text-surface-900 dark:text-surface-0 font-semibold mb-4"},"Subject",-1),ve={key:0,class:"col-span-12"},be={class:"border border-surface-200 dark:border-surface-700 rounded p-6"},he={class:"col-span-12"},ge=o("i",{class:"pi pi-ellipsis-h"},null,-1),_e=[ge],xe={class:"flex gap-x-4 justify-end p-8 border-t border-surface-200 dark:border-surface-700"},ye={__name:"Reply",props:{dialogVisible:{type:Boolean,default:!1},mailDetail:{type:Object,default:null}},emits:["save","update:dialogVisible"],setup(k,{emit:p}){const a=v({}),s=v({}),m=p,u=k,l=v(!1),b=v(!1);H(()=>{d()}),S(()=>u.mailDetail,()=>{d()});function d(){a.value={...u.mailDetail}}function D(){const c=C();m("save",c)}function C(){return{...a.value,...s.value,id:L(),to:u.mailDetail.to||u.mailDetail.from,sent:!0,archived:!1,trash:!1,spam:!1,starred:!1,important:!1,date:j()}}function w(){l.value=!l.value}function L(){let c="",i="0123456789";for(let g=0;g<5;g++)c+=i.charAt(Math.floor(Math.random()*i.length));return c}function j(){return new Date().toDateString().split(" ").slice(1,4).join(" ")}return S(()=>u.dialogVisible,c=>{b.value=c}),S(()=>b.value,c=>{m("update:dialogVisible",c)}),(c,i)=>{const g=P,x=Q,M=W,V=le,y=O,I=ae,e=X;return h(),q(I,{visible:b.value,"onUpdate:visible":i[5]||(i[5]=t=>b.value=t),header:"New Message",modal:"",class:"mx-4 sm:mx-0 sm:w-full md:w-8/12 lg:w-6/12",contentClass:"rounded-b border-t border-surface-200 dark:border-surface-700 p-0"},{default:A(()=>[o("div",ue,[o("div",ce,[o("div",de,[pe,r(M,{class:"w-full",style:{height:"3.5rem"}},{default:A(()=>[r(g,{class:"pi pi-user",style:{left:"1.5rem"}}),r(x,{id:"to",type:"text",class:"w-full pl-16 text-surface-900 dark:text-surface-0 font-semibold",style:{height:"3.5rem"},modelValue:a.value.from,"onUpdate:modelValue":i[0]||(i[0]=t=>a.value.from=t)},null,8,["modelValue"])]),_:1})]),o("div",me,[fe,r(M,{class:"w-full",style:{height:"3.5rem"}},{default:A(()=>[r(g,{class:"pi pi-pencil",style:{left:"1.5rem"}}),r(x,{id:"subject",type:"text",placeholder:"Subject",class:"w-full pl-16 text-surface-900 dark:text-surface-0 font-semibold",style:{height:"3.5rem"},modelValue:a.value.title,"onUpdate:modelValue":i[1]||(i[1]=t=>a.value.title=t)},null,8,["modelValue"])]),_:1})]),l.value?(h(),_("div",ve,[o("div",be,B(a.value.message),1)])):z("",!0),o("div",he,[G((h(),_("span",{class:"bg-surface-50 dark:bg-surface-950 cursor-pointer rounded px-2",onClick:i[2]||(i[2]=t=>w())},_e)),[[e,l.value?"Hide content":"Show content"]]),r(V,{editorStyle:{height:"250px"},class:"mt-4",modelValue:s.value.message,"onUpdate:modelValue":i[3]||(i[3]=t=>s.value.message=t)},null,8,["modelValue"])])]),o("div",xe,[r(y,{type:"button",outlined:"",icon:"pi pi-image"}),r(y,{type:"button",outlined:"",icon:"pi pi-paperclip"}),r(y,{type:"button",class:"h-12",icon:"pi pi-send",label:"Send",onClick:i[4]||(i[4]=t=>D())})])])]),_:1},8,["visible"])}}},ke={class:"card"},we={class:"flex flex-col md:flex-row gap-6"},Me={class:"w-full md:w-3/12 xl:w-2/12 xl:p-4"},Ve={class:"md:w-9/12 xl:w-10/12 xl:p-4"},Ce={__name:"Index",setup(k){const p=Y(),a=v([]),s=v({}),m=v("inbox"),u=v(!1),l=v(null),b=Z();H(async()=>{m.value=b.path.split("/")[3],a.value=await D(),d(a.value)}),S(()=>b.path,e=>{m.value=e.split("/")[3]});async function d(e){C(e)}async function D(){const e=await fetch("/demo/data/mail.json"),{data:t}=await e.json();return t}function C(e){for(const t of e)!t.archived&&!t.trash&&!t.spam&&!t.sent&&w("inbox",t),Object.keys(t).forEach(n=>{t[n]===!0&&w(n,t)})}function w(e,t){s.value[e]?s.value[e].push(t):s.value[e]=[]}const L=ee(()=>{var t,n,f,T,N,E,U;const e=s.value;return[{label:"Inbox",icon:"pi pi-inbox",badge:((t=e.inbox)==null?void 0:t.length)||0,routerLink:"/apps/mail/inbox"},{label:"Starred",icon:"pi pi-star",badge:((n=e.starred)==null?void 0:n.length)||0,routerLink:"/apps/mail/starred"},{label:"Spam",icon:"pi pi-ban",badge:((f=e.spam)==null?void 0:f.length)||0,routerLink:"/apps/mail/spam"},{label:"Important",icon:"pi pi-bookmark",badge:((T=e.important)==null?void 0:T.length)||0,routerLink:"/apps/mail/important"},{label:"Sent",icon:"pi pi-send",badge:((N=e.sent)==null?void 0:N.length)||0,routerLink:"/apps/mail/sent"},{label:"Archived",icon:"pi pi-book",badge:((E=e.archived)==null?void 0:E.length)||0,routerLink:"/apps/mail/archived"},{label:"Trash",icon:"pi pi-trash",badge:((U=e.trash)==null?void 0:U.length)||0,routerLink:"/apps/mail/trash"}]}),j=async e=>{s.value={};const t=e.length>0?"Mails deleted":"Mail deleted";x("trash",e),p.add({severity:"info",summary:"Info",detail:t,life:3e3}),d(a.value)},c=async e=>{s.value={},e.forEach(t=>{a.value.find(n=>n.id===t.id).spam=!0}),d(a.value)},i=async e=>{s.value={},x("archived",e),d(a.value)},g=async(e,t,n)=>{s.value={},a.value.find(f=>f.id===t.id)[e]=n,d(a.value)},x=(e,t)=>{t.length>0?t.forEach(n=>{a.value.find(f=>f.id===n.id)[e]=!0}):a.value.find(n=>n.id===t.id)[e]=!0},M=e=>{u.value=!0,l.value=e},V=e=>{u.value=!1,l.value=null,s.value={},a.value.push(e),d(a.value)},y=e=>{s.value={},a.value.push(e),d(a.value)},I=e=>{u.value=e};return(e,t)=>{const n=te("router-view");return h(),_(F,null,[o("div",ke,[o("div",we,[o("div",Me,[r(re,{items:L.value},null,8,["items"])]),o("div",Ve,[r(n,{allMails:a.value,mails:s.value[m.value]||void 0,onTrash:j,onSpam:c,onArchive:i,"onChange:mail:type":g,onReply:M,"onSend:message":V,"onNew:mail":y},null,8,["allMails","mails"])])])]),r(ye,{visible:u.value,"onUpdate:visible":t[0]||(t[0]=f=>u.value=f),"mail-detail":l.value,onSave:V,"onUpdate:dialogVisible":t[1]||(t[1]=f=>I())},null,8,["visible","mail-detail"])],64)}}};export{Ce as default};
